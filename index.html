<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carbonator — Analog Saturation Plugin by Carbinated Audio</title>
    <meta name="description" content="Carbonator is a $14.99 analog saturation plugin with 5 DSP flavors, one-knob control, and Carbonated mode. VST3, AU, AAX for macOS & Windows. Try the free demo.">
    <meta name="keywords" content="saturation plugin, distortion VST, analog warmth, audio plugin, VST3, AU, AAX, mixing plugin, Carbonator, Carbinated Audio">
    <meta name="author" content="Carbinated Audio">

    <!-- Open Graph / Social Sharing -->
    <meta property="og:type" content="product">
    <meta property="og:title" content="Carbonator — Analog Saturation Plugin">
    <meta property="og:description" content="One knob. Five DSP flavors. Endless character. The $14.99 saturation plugin built for producers who hear the difference.">
    <meta property="og:url" content="https://carbinated-audio.netlify.app">
    <meta property="og:site_name" content="Carbinated Audio">
    <meta property="og:image" content="https://carbinated-audio.netlify.app/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="product:price:amount" content="14.99">
    <meta property="product:price:currency" content="USD">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Carbonator — Analog Saturation Plugin">
    <meta name="twitter:description" content="One knob. Five DSP flavors. Endless character. The $14.99 saturation plugin for producers who hear the difference.">
    <meta name="twitter:image" content="https://carbinated-audio.netlify.app/og-image.png">

    <!-- Structured Data (Product Schema) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Carbonator",
        "applicationCategory": "MultimediaApplication",
        "operatingSystem": "macOS, Windows",
        "offers": {
            "@type": "Offer",
            "price": "14.99",
            "priceCurrency": "USD",
            "availability": "https://schema.org/InStock",
            "priceValidUntil": "2026-03-31"
        },
        "description": "Analog saturation plugin with 5 DSP flavors, one-knob control, and Carbonated mode. VST3, AU, AAX formats.",
        "brand": {
            "@type": "Brand",
            "name": "Carbinated Audio"
        },
        "softwareVersion": "2.2.0"
    }
    </script>

    <!-- Google Analytics 4 -->
    <!-- TODO: Replace G-XXXXXXXXXX with your actual GA4 measurement ID -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX');
    </script>

    <link rel="canonical" href="https://carbinated-audio.netlify.app">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500&family=Pacifico&family=Lobster&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0d0a1a;
            --bg-secondary: #151025;
            --bg-card: #1a1430;
            --bg-card-darker: #120e22;
            --orange: #ff6b2b;
            --orange-light: #ff8c42;
            --red: #e63946;
            --pink: #ff3366;
            --magenta: #cc33ff;
            --yellow: #ffd700;
            --cyan: #00d4ff;
            --text-primary: #ffffff;
            --text-secondary: #a09bb5;
            --text-muted: #6b6580;
            --border: #2a2440;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* Silk WebGL background */
        #silk-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .content-wrapper {
            position: relative;
            z-index: 1;
        }

        /* Navigation */
        nav {
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 16px 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(13, 10, 26, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .nav-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }

        .nav-logo-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .nav-logo-text {
            font-family: 'Pacifico', cursive;
            font-size: 20px;
            font-weight: 400;
            letter-spacing: 0.5px;
            color: #fff;
            position: relative;
            user-select: none;
            display: inline-block;
        }

        .nav-logo-text .shuffle-char {
            display: inline-block;
            min-width: 0.3em;
            transition: none;
        }

        .nav-links {
            display: flex;
            align-items: center;
            gap: 32px;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-links a:hover {
            color: var(--text-primary);
        }

        .btn-buy {
            padding: 10px 24px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
        }

        .btn-buy:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 60px 80px 80px;
            gap: 80px;
            max-width: 1280px;
            margin: 0 auto;
        }

        .hero-left {
            flex: 1;
            max-width: 560px;
        }

        .hero-right {
            flex: 0 0 auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .version-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 18px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 32px;
        }

        .version-badge .sparkle {
            font-size: 16px;
        }

        .hero-title {
            margin-bottom: 24px;
        }

        .hero-title .brand-name {
            display: block;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 80px;
            font-weight: 900;
            line-height: 1.05;
            letter-spacing: -2px;
            background: linear-gradient(90deg, #ff6b2b, #ff3366, #cc33ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
        }

        .hero-title .line {
            display: block;
            font-size: 72px;
            font-weight: 900;
            line-height: 1.05;
            letter-spacing: -2px;
        }

        .hero-title .line-1 {
            color: var(--text-primary);
        }

        .hero-title .line-2 {
            background: linear-gradient(90deg, #ff6b2b, #ff3366);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-title .line-3 {
            background: linear-gradient(90deg, #ff3366, #cc33ff, #ff6b2b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-desc {
            font-size: 17px;
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 8px;
            max-width: 440px;
        }

        .hero-brand {
            font-size: 12px;
            font-weight: 600;
            letter-spacing: 2px;
            color: var(--orange);
            margin-bottom: 32px;
            opacity: 0.7;
        }

        .hero-buttons {
            display: flex;
            gap: 16px;
            margin-bottom: 48px;
        }

        .btn-download {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 14px 32px;
            background: linear-gradient(135deg, var(--orange), var(--red));
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
        }

        .btn-download:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(255, 107, 43, 0.3);
        }

        .btn-secondary {
            padding: 14px 32px;
            background: #ffffff;
            border: none;
            border-radius: 10px;
            color: #1a1a2e;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(255, 255, 255, 0.15);
        }

        .hero-stats {
            display: flex;
            gap: 40px;
        }

        .stat {
            text-align: left;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--orange), var(--pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-muted);
            font-weight: 500;
        }

        /* Plugin Mockup */
        .plugin-mockup {
            width: 340px;
            background: linear-gradient(180deg, #1a1430, #12101f);
            border: 1px solid rgba(255, 50, 100, 0.3);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 40px rgba(255, 50, 100, 0.1);
            user-select: none;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .plugin-mockup:hover {
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 60px rgba(255, 50, 100, 0.18);
        }

        .plugin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            width: 100%;
        }

        .plugin-name {
            font-family: 'Pacifico', cursive;
            font-size: 22px;
            font-weight: 400;
            color: var(--orange);
        }

        .plugin-menu {
            width: 32px;
            height: 32px;
            border: 1px solid var(--border);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            font-size: 14px;
        }

        .plugin-subtitle {
            text-align: center;
            font-family: 'Lobster', cursive;
            font-size: 12px;
            letter-spacing: 1px;
            color: var(--orange);
            font-weight: 400;
            margin-bottom: 16px;
        }

        .plugin-knob-section {
            text-align: center;
            position: relative;
            padding: 10px 0;
        }

        .plugin-fizz-label {
            font-size: 11px;
            letter-spacing: 4px;
            color: var(--text-secondary);
            font-weight: 600;
            margin-bottom: 20px;
        }

        .knob-wrapper {
            position: relative;
            width: 240px;
            height: 240px;
            margin: 0 auto 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Corner parameter knobs */
        .corner-knob {
            width: 26px;
            height: 26px;
            border: 2px solid var(--border);
            border-radius: 50%;
            position: absolute;
            background: rgba(255, 255, 255, 0.02);
            cursor: pointer;
            transition: border-color 0.3s, box-shadow 0.3s;
            z-index: 2;
        }

        .corner-knob:hover {
            border-color: rgba(255, 100, 50, 0.5);
            box-shadow: 0 0 10px rgba(255, 100, 50, 0.2);
        }

        .corner-knob.tl { top: 0; left: 0; }
        .corner-knob.tr { top: 0; right: 0; }
        .corner-knob.bl { bottom: 0; left: 0; }
        .corner-knob.br { bottom: 0; right: 0; }

        .knob-container {
            position: relative;
            width: 190px;
            height: 190px;
            cursor: grab;
        }

        .knob-container:active {
            cursor: grabbing;
        }

        /* SVG tick ring */
        .knob-ticks-svg {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 240px;
            height: 240px;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }

        /* Arc track behind ticks */
        .knob-arc-track {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 230px;
            height: 230px;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }

        .knob-outer {
            width: 190px;
            height: 190px;
            border-radius: 50%;
            position: relative;
            background: radial-gradient(circle at 38% 32%, #ff4466, #dd1133 35%, #880022 65%, #330010 100%);
            box-shadow:
                0 6px 40px rgba(255, 50, 80, 0.45),
                0 0 80px rgba(255, 50, 80, 0.15),
                inset 0 -4px 12px rgba(0, 0, 0, 0.4),
                inset 0 4px 12px rgba(255, 120, 120, 0.15);
            transition: box-shadow 0.3s;
        }

        .knob-outer.active {
            box-shadow:
                0 6px 50px rgba(255, 50, 80, 0.6),
                0 0 100px rgba(255, 50, 80, 0.25),
                inset 0 -4px 12px rgba(0, 0, 0, 0.4),
                inset 0 4px 12px rgba(255, 120, 120, 0.2);
        }

        /* Specular highlight on knob */
        .knob-highlight {
            position: absolute;
            top: 8%;
            left: 15%;
            width: 45%;
            height: 40%;
            background: radial-gradient(ellipse at 50% 50%, rgba(255, 180, 180, 0.25), transparent 70%);
            border-radius: 50%;
            pointer-events: none;
            transform: rotate(-15deg);
        }

        .knob-indicator {
            position: absolute;
            top: 14px;
            left: 50%;
            width: 3px;
            height: 24px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 2px;
            transform-origin: 50% calc(95px - 14px);
            pointer-events: none;
            box-shadow: 0 0 6px rgba(255, 255, 255, 0.5);
        }

        .knob-value {
            font-size: 40px;
            font-weight: 800;
            color: white;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            margin-top: 4px;
            transition: transform 0.1s;
        }

        .knob-value.bump {
            transform: scale(1.05);
        }

        .plugin-bottom {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-top: 16px;
            width: 100%;
        }

        .plugin-flavor-section {
            flex: 1;
        }

        .plugin-flavor-label {
            font-size: 10px;
            letter-spacing: 2px;
            color: var(--orange);
            font-weight: 600;
            margin-bottom: 6px;
        }

        .plugin-flavor-select {
            padding: 8px 16px;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 6px;
            color: white;
            font-size: 14px;
            font-weight: 600;
            font-family: inherit;
            width: 130px;
            cursor: pointer;
            transition: border-color 0.2s;
            appearance: none;
            -webkit-appearance: none;
        }

        .plugin-flavor-select:hover {
            border-color: rgba(255, 100, 50, 0.5);
        }

        .plugin-flavor-select option {
            background: #1a1430;
            color: white;
        }

        .plugin-carbonated {
            text-align: right;
        }

        .plugin-carbonated-label {
            font-size: 9px;
            letter-spacing: 2px;
            color: var(--text-secondary);
            font-weight: 600;
            margin-bottom: 6px;
        }

        .toggle-switch {
            width: 56px;
            height: 28px;
            background: var(--red);
            border-radius: 4px;
            position: relative;
            cursor: pointer;
            display: inline-block;
            transition: background 0.3s;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 4px;
            width: 24px;
            height: 20px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 2px;
            transition: left 0.3s, right 0.3s;
            right: 4px;
        }

        .toggle-switch.off {
            background: #444;
        }

        .toggle-switch.off::after {
            right: auto;
            left: 4px;
        }

        /* Ambient glow pulse */
        @keyframes knobPulse {
            0%, 100% { box-shadow: 0 6px 40px rgba(255, 50, 80, 0.45), 0 0 80px rgba(255, 50, 80, 0.15), inset 0 -4px 12px rgba(0, 0, 0, 0.4), inset 0 4px 12px rgba(255, 120, 120, 0.15); }
            50% { box-shadow: 0 6px 45px rgba(255, 50, 80, 0.55), 0 0 90px rgba(255, 50, 80, 0.22), inset 0 -4px 12px rgba(0, 0, 0, 0.4), inset 0 4px 12px rgba(255, 120, 120, 0.2); }
        }

        .knob-outer.idle-pulse {
            animation: knobPulse 3s ease-in-out infinite;
        }

        /* Sections common */
        section {
            padding: 100px 60px;
        }

        .section-label {
            text-align: center;
            font-size: 13px;
            font-weight: 700;
            letter-spacing: 3px;
            color: var(--orange);
            text-transform: uppercase;
            margin-bottom: 16px;
        }

        .section-title {
            text-align: center;
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 16px;
            letter-spacing: -1px;
        }

        .section-title .accent {
            font-style: italic;
            background: linear-gradient(90deg, var(--orange), var(--pink), var(--magenta));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-desc {
            text-align: center;
            color: var(--text-secondary);
            font-size: 16px;
            max-width: 600px;
            margin: 0 auto 48px;
            line-height: 1.7;
        }

        /* Flavors Section */
        .flavors-section {
            padding-top: 80px;
        }

        .flavor-tabs {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 40px;
        }

        .flavor-tab {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 700;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
        }

        .flavor-tab:hover {
            border-color: rgba(255, 255, 255, 0.2);
            color: var(--text-primary);
        }

        .flavor-tab.active {
            background: var(--orange);
            border-color: var(--orange);
            color: white;
        }

        .flavor-tab .emoji {
            font-size: 16px;
        }

        /* Flavor Detail Card */
        .flavor-detail {
            max-width: 1080px;
            margin: 0 auto;
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        .flavor-detail-header {
            padding: 32px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .flavor-detail-header.cola { background: linear-gradient(135deg, #e85d26, #ff8c42); }
        .flavor-detail-header.cherry { background: linear-gradient(135deg, #dc143c, #ff4466); }
        .flavor-detail-header.grape { background: linear-gradient(135deg, #7b2d8e, #9b59b6); }
        .flavor-detail-header.lemon-lime { background: linear-gradient(135deg, #7ab317, #a0d536); }
        .flavor-detail-header.orange-cream { background: linear-gradient(135deg, #e87d2b, #ffaa55); }

        .flavor-detail-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .flavor-detail-emoji {
            font-size: 36px;
        }

        .flavor-detail-name {
            font-size: 28px;
            font-weight: 800;
        }

        .flavor-detail-tagline {
            font-size: 14px;
            opacity: 0.85;
            font-weight: 500;
        }

        .flavor-detail-tags {
            display: flex;
            gap: 8px;
        }

        .flavor-tag {
            padding: 6px 16px;
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 50px;
            font-size: 12px;
            font-weight: 600;
            color: white;
        }

        .flavor-detail-body {
            display: grid;
            grid-template-columns: 1fr 1fr;
            background: var(--bg-card-darker);
        }

        .signal-chain {
            padding: 32px 40px;
            border-right: 1px solid var(--border);
        }

        .param-map {
            padding: 32px 40px;
        }

        .detail-section-title {
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 2px;
            color: var(--text-muted);
            margin-bottom: 24px;
        }

        .chain-badge {
            display: inline-block;
            padding: 4px 12px;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
            margin-bottom: 24px;
        }

        .chain-item {
            display: flex;
            align-items: baseline;
            gap: 12px;
            margin-bottom: 20px;
            padding-left: 8px;
            border-left: 2px solid var(--border);
        }

        .chain-item-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--text-muted);
            flex-shrink: 0;
            margin-left: -11px;
        }

        .chain-item-name {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .chain-item-desc {
            font-size: 12px;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
        }

        .flat-mode-box {
            margin-top: 24px;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            color: var(--text-muted);
        }

        .flat-mode-box span {
            color: var(--text-secondary);
            font-weight: 600;
        }

        /* Parameter bars */
        .param-row {
            margin-bottom: 16px;
        }

        .param-row-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
        }

        .param-name {
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 1px;
            color: var(--text-primary);
        }

        .param-range {
            font-size: 12px;
            font-weight: 600;
            color: var(--cyan);
            font-family: 'JetBrains Mono', monospace;
        }

        .param-bar {
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .param-bar-fill {
            height: 100%;
            border-radius: 2px;
            background: linear-gradient(90deg, var(--orange), var(--red));
        }

        .fizz-visualizer {
            margin-top: 24px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border);
            border-radius: 8px;
        }

        .fizz-vis-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .fizz-vis-label {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            font-family: 'JetBrains Mono', monospace;
        }

        .fizz-vis-method {
            font-size: 11px;
            color: var(--orange);
            font-family: 'JetBrains Mono', monospace;
        }

        .fizz-vis-bar {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .fizz-vis-num {
            font-size: 11px;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
            width: 20px;
        }

        .fizz-dots {
            flex: 1;
            height: 20px;
            background: linear-gradient(90deg, var(--orange), var(--red));
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 3px;
            padding: 0 6px;
            overflow: hidden;
        }

        .fizz-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.3);
            flex-shrink: 0;
        }

        .fizz-vis-caption {
            font-size: 11px;
            color: var(--text-muted);
            text-align: center;
            font-family: 'JetBrains Mono', monospace;
        }

        /* Demos Section */
        .demos-section {
            padding-top: 100px;
        }

        .demo-player {
            max-width: 1080px;
            margin: 0 auto 40px;
            background: var(--bg-card-darker);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
        }

        .demo-player-top {
            padding: 24px 32px;
            position: relative;
        }

        .demo-player-category {
            font-size: 11px;
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-muted);
            letter-spacing: 1px;
            margin-bottom: 4px;
        }

        .demo-player-flavor {
            font-size: 22px;
            font-weight: 800;
            margin-bottom: 20px;
        }

        .demo-player-badge {
            position: absolute;
            top: 24px;
            right: 32px;
            padding: 6px 14px;
            background: var(--orange);
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }

        .waveform-container {
            position: relative;
            height: 140px;
            margin-bottom: 8px;
            cursor: pointer;
        }

        .waveform-canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* Playhead */
        .playhead {
            position: absolute;
            top: 0;
            left: 0;
            width: 2px;
            height: 100%;
            background: var(--orange);
            box-shadow: 0 0 8px rgba(255, 107, 43, 0.6);
            pointer-events: none;
            transition: left 0.05s linear;
            z-index: 2;
        }

        .playhead::after {
            content: '';
            position: absolute;
            top: -4px;
            left: -4px;
            width: 10px;
            height: 10px;
            background: var(--orange);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 107, 43, 0.8);
        }

        .demo-progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.06);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 8px;
            cursor: pointer;
        }

        .demo-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--orange), var(--red));
            border-radius: 2px;
            width: 0%;
            transition: width 0.05s linear;
        }

        .demo-time {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 8px;
        }

        .demo-time-text {
            font-size: 12px;
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-muted);
        }

        .demo-player-controls {
            padding: 20px 32px;
            display: flex;
            align-items: center;
            gap: 20px;
            border-top: 1px solid var(--border);
        }

        .play-btn {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            background: var(--orange);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
            transition: all 0.2s;
        }

        .play-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 20px rgba(255, 107, 43, 0.4);
        }

        .play-btn.playing {
            animation: playPulse 1.5s ease-in-out infinite;
        }

        @keyframes playPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 107, 43, 0.4); }
            50% { box-shadow: 0 0 0 12px rgba(255, 107, 43, 0); }
        }

        .play-btn svg {
            width: 20px;
            height: 20px;
            fill: white;
            margin-left: 2px;
            transition: all 0.2s;
        }

        .slider-container {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .slider-label {
            font-size: 12px;
            color: var(--text-muted);
            font-weight: 600;
            white-space: nowrap;
        }

        .slider-track {
            flex: 1;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .slider-percentage {
            font-size: 12px;
            font-weight: 700;
            color: var(--cyan);
            margin-bottom: 8px;
        }

        .slider-input {
            width: 100%;
            -webkit-appearance: none;
            appearance: none;
            height: 4px;
            background: linear-gradient(90deg, var(--text-muted), var(--orange));
            border-radius: 2px;
            outline: none;
        }

        .slider-input::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #88ccff, #6699ff);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(100, 150, 255, 0.4);
        }

        .demo-controls-right {
            display: flex;
            gap: 12px;
        }

        .demo-icon-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: color 0.2s;
        }

        .demo-icon-btn:hover {
            color: var(--text-primary);
        }

        .demo-flavor-tabs {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 32px;
        }

        .demo-flavor-tab {
            padding: 12px 24px;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
        }

        .demo-flavor-tab:hover {
            border-color: rgba(255, 255, 255, 0.2);
        }

        .demo-flavor-tab.active {
            background: var(--orange);
            border-color: var(--orange);
            color: white;
        }

        /* SVG Waveform */
        .waveform svg {
            width: 100%;
            height: 100%;
        }

        /* Compatibility Section */
        .compat-section {
            padding-top: 100px;
            padding-bottom: 100px;
        }

        .compat-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            max-width: 1080px;
            margin: 0 auto;
        }

        .compat-card {
            background: var(--bg-card-darker);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 32px;
            transition: border-color 0.3s, transform 0.3s;
        }

        .compat-card:hover {
            border-color: rgba(255, 107, 43, 0.3);
            transform: translateY(-4px);
        }

        .compat-card-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .compat-card-icon.daw { background: linear-gradient(135deg, #3b82f6, #6366f1); }
        .compat-card-icon.format { background: linear-gradient(135deg, var(--orange), var(--red)); }
        .compat-card-icon.os { background: linear-gradient(135deg, #10b981, #059669); }

        .compat-card-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .compat-list {
            list-style: none;
            padding: 0;
        }

        .compat-list li {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            font-size: 14px;
            color: var(--text-secondary);
            border-bottom: 1px solid rgba(255, 255, 255, 0.04);
        }

        .compat-list li:last-child {
            border-bottom: none;
        }

        .compat-check {
            color: #10b981;
            font-weight: 700;
            font-size: 16px;
            flex-shrink: 0;
        }

        .compat-list li span.compat-version {
            margin-left: auto;
            font-size: 12px;
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-muted);
        }

        .compat-note {
            text-align: center;
            max-width: 700px;
            margin: 40px auto 0;
            padding: 20px 28px;
            background: rgba(255, 107, 43, 0.06);
            border: 1px solid rgba(255, 107, 43, 0.15);
            border-radius: 12px;
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.7;
        }

        .compat-note strong {
            color: var(--orange);
        }

        .compat-badges {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .compat-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid var(--border);
            border-radius: 50px;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .compat-badge .badge-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10b981;
        }

        /* Pricing Section */
        .pricing-section {
            padding: 100px 60px 120px;
        }

        .pricing-container {
            display: flex;
            justify-content: center;
            gap: 28px;
            max-width: 1080px;
            margin: 0 auto;
        }

        .pricing-card {
            flex: 1;
            max-width: 360px;
            background: var(--bg-card-darker);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 40px 36px;
            position: relative;
            transition: transform 0.3s, border-color 0.3s;
        }

        .pricing-card:hover {
            transform: translateY(-6px);
        }

        .pricing-card.featured {
            border-color: var(--orange);
            background: linear-gradient(180deg, rgba(255, 107, 43, 0.06), var(--bg-card-darker) 40%);
            box-shadow: 0 8px 40px rgba(255, 107, 43, 0.12), 0 0 60px rgba(255, 107, 43, 0.05);
        }

        .pricing-card.featured:hover {
            box-shadow: 0 12px 50px rgba(255, 107, 43, 0.2), 0 0 80px rgba(255, 107, 43, 0.08);
        }

        .pricing-popular {
            position: absolute;
            top: -14px;
            left: 50%;
            transform: translateX(-50%);
            padding: 6px 20px;
            background: linear-gradient(135deg, var(--orange), var(--red));
            border-radius: 50px;
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 1px;
            text-transform: uppercase;
            white-space: nowrap;
        }

        .pricing-card-header {
            text-align: center;
            margin-bottom: 28px;
        }

        .pricing-card-name {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .pricing-card-desc {
            font-size: 13px;
            color: var(--text-muted);
        }

        .pricing-price {
            text-align: center;
            margin-bottom: 32px;
        }

        .pricing-dollar {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-secondary);
            vertical-align: super;
        }

        .pricing-amount {
            font-size: 64px;
            font-weight: 900;
            letter-spacing: -2px;
            line-height: 1;
        }

        .pricing-card.featured .pricing-amount {
            background: linear-gradient(135deg, var(--orange), var(--pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .pricing-period {
            font-size: 14px;
            color: var(--text-muted);
            font-weight: 500;
        }

        .pricing-features {
            list-style: none;
            padding: 0;
            margin-bottom: 32px;
        }

        .pricing-features li {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 0;
            font-size: 14px;
            color: var(--text-secondary);
            border-bottom: 1px solid rgba(255, 255, 255, 0.04);
        }

        .pricing-features li:last-child {
            border-bottom: none;
        }

        .pricing-features .check {
            color: #10b981;
            font-size: 16px;
            flex-shrink: 0;
        }

        .pricing-features .cross {
            color: #555;
            font-size: 16px;
            flex-shrink: 0;
        }

        .pricing-btn {
            display: block;
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
            text-align: center;
            text-decoration: none;
        }

        .pricing-btn-primary {
            background: linear-gradient(135deg, var(--orange), var(--red));
            color: white;
        }

        .pricing-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(255, 107, 43, 0.35);
        }

        .pricing-btn-outline {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-secondary);
        }

        .pricing-btn-outline:hover {
            border-color: rgba(255, 255, 255, 0.3);
            color: white;
            transform: translateY(-2px);
        }

        .pricing-guarantee {
            text-align: center;
            max-width: 500px;
            margin: 40px auto 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 13px;
            color: var(--text-muted);
        }

        .pricing-guarantee svg {
            flex-shrink: 0;
        }

        /* Footer */
        .site-footer {
            border-top: 1px solid var(--border);
            padding: 40px 60px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .footer-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-logo {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .footer-text {
            font-size: 13px;
            color: var(--text-muted);
        }

        .footer-links {
            display: flex;
            gap: 24px;
        }

        .footer-links a {
            font-size: 13px;
            color: var(--text-muted);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-links a:hover {
            color: var(--text-secondary);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .hero {
                flex-direction: column;
                padding: 60px 32px 60px;
                text-align: center;
            }
            .hero-left {
                max-width: 100%;
            }
            .hero-desc {
                max-width: 100%;
            }
            .hero-buttons {
                justify-content: center;
            }
            .hero-stats {
                justify-content: center;
            }
            .hero-title .brand-name {
                font-size: 58px;
            }
            .hero-title .line {
                font-size: 52px;
            }
            .flavor-tabs {
                flex-wrap: wrap;
            }
            .flavor-detail-body {
                grid-template-columns: 1fr;
            }
            .signal-chain {
                border-right: none;
                border-bottom: 1px solid var(--border);
            }
            .flavor-detail-header {
                flex-direction: column;
                gap: 16px;
                align-items: flex-start;
            }
            nav {
                padding: 12px 20px;
            }
            section {
                padding: 60px 20px;
            }
            .compat-grid {
                grid-template-columns: 1fr;
            }
            .pricing-container {
                flex-direction: column;
                align-items: center;
            }
            .pricing-card {
                max-width: 100%;
            }
            .pricing-section {
                padding: 60px 20px 80px;
            }
            .site-footer {
                flex-direction: column;
                gap: 16px;
                text-align: center;
                padding: 30px 20px;
            }
        }

        @media (max-width: 640px) {
            .hero-title .brand-name {
                font-size: 42px;
            }
            .hero-title .line {
                font-size: 40px;
            }
            .section-title {
                font-size: 32px;
            }
            .nav-links a:not(.btn-buy) {
                display: none;
            }
            .launch-banner-inner {
                flex-direction: column;
                gap: 8px;
            }
            .countdown-units {
                gap: 8px;
            }
            .testimonial-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Launch Banner */
        .launch-banner {
            position: relative;
            z-index: 200;
            background: linear-gradient(90deg, var(--orange), var(--red), var(--magenta));
            padding: 10px 20px;
            text-align: center;
        }

        .launch-banner-inner {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .launch-banner-text {
            font-size: 14px;
            font-weight: 700;
            color: white;
            letter-spacing: 0.5px;
        }

        .launch-banner-text .original-price {
            text-decoration: line-through;
            opacity: 0.7;
            margin-right: 4px;
        }

        .launch-banner-text .launch-price {
            font-size: 18px;
            font-weight: 900;
        }

        .countdown-units {
            display: flex;
            gap: 8px;
        }

        .countdown-unit {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: rgba(0, 0, 0, 0.25);
            border-radius: 6px;
            padding: 4px 8px;
            min-width: 44px;
        }

        .countdown-value {
            font-size: 16px;
            font-weight: 900;
            color: white;
            line-height: 1.2;
            font-family: 'JetBrains Mono', monospace;
        }

        .countdown-label {
            font-size: 8px;
            font-weight: 600;
            letter-spacing: 1px;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
        }

        .launch-banner.expired {
            display: none;
        }

        /* Launch pricing badge */
        .pricing-original {
            font-size: 28px;
            font-weight: 600;
            color: var(--text-muted);
            text-decoration: line-through;
            margin-right: 8px;
        }

        .pricing-launch-badge {
            display: inline-block;
            padding: 4px 12px;
            background: linear-gradient(135deg, var(--orange), var(--red));
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 1px;
            color: white;
            margin-bottom: 8px;
        }

        /* Testimonials Section */
        .testimonials-section {
            padding: 80px 60px 100px;
        }

        .testimonial-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            max-width: 1080px;
            margin: 0 auto;
        }

        .testimonial-card {
            background: var(--bg-card-darker);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 28px;
            transition: border-color 0.3s, transform 0.3s;
        }

        .testimonial-card:hover {
            border-color: rgba(255, 107, 43, 0.3);
            transform: translateY(-4px);
        }

        .testimonial-stars {
            color: var(--yellow);
            font-size: 14px;
            letter-spacing: 2px;
            margin-bottom: 16px;
        }

        .testimonial-text {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 20px;
            font-style: italic;
        }

        .testimonial-author {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .testimonial-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--orange), var(--magenta));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 700;
            color: white;
        }

        .testimonial-name {
            font-size: 13px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .testimonial-role {
            font-size: 11px;
            color: var(--text-muted);
        }

        @media (max-width: 1024px) {
            .testimonial-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <canvas id="silk-bg"></canvas>

    <div class="content-wrapper">
        <!-- Launch Countdown Banner -->
        <div class="launch-banner" id="launchBanner">
            <div class="launch-banner-inner">
                <span class="launch-banner-text">
                    Launch Price: <span class="original-price">$20</span> <span class="launch-price">$14.99</span> &mdash; Offer ends soon!
                </span>
                <div class="countdown-units" id="countdown">
                    <div class="countdown-unit">
                        <span class="countdown-value" id="cd-days">00</span>
                        <span class="countdown-label">Days</span>
                    </div>
                    <div class="countdown-unit">
                        <span class="countdown-value" id="cd-hours">00</span>
                        <span class="countdown-label">Hrs</span>
                    </div>
                    <div class="countdown-unit">
                        <span class="countdown-value" id="cd-mins">00</span>
                        <span class="countdown-label">Min</span>
                    </div>
                    <div class="countdown-unit">
                        <span class="countdown-value" id="cd-secs">00</span>
                        <span class="countdown-label">Sec</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <nav>
            <a href="#" class="nav-logo">
                <span class="nav-logo-text" id="shuffleText" data-text="Carbinated Audio">Carbinated Audio</span>
            </a>
            <div class="nav-links">
                <a href="#features">Features</a>
                <a href="#demos">Demos</a>
                <a href="#compatibility">Compatibility</a>
                <a href="#pricing">Pricing</a>
                <a href="#reviews">Reviews</a>
                <a href="https://buy.stripe.com/aFafZhgbffRw6nv0UH3oA00?prefilled_promo_code=LAUNCH25" class="btn-buy">Buy Now — $14.99</a>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-left">

                <div class="hero-title">
                    <span class="brand-name">Carbinated Audio</span>
                    <span class="line line-1">Saturate.</span>
                    <span class="line line-2">Distort.</span>
                    <span class="line line-3">Dominate.</span>
                </div>

                <p class="hero-desc">
                    One knob. Five DSP flavors. Endless character. The analog saturation plugin built for producers who hear the difference.
                </p>
                <p class="hero-brand">Carbinated Audio</p>

                <div class="hero-buttons">
                    <a href="#" class="btn-download" onclick="openDemoGate(event)">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        Download Free Trial
                    </a>
                    <a href="https://www.instagram.com/reel/DVUP9ozDwVb/?utm_source=ig_web_copy_link&igsh=MzRlODBiNWFlZA==" target="_blank" rel="noopener" class="btn-secondary">Watch Demo</a>
                </div>

                <div class="hero-stats">
                    <div class="stat">
                        <div class="stat-value">50K+</div>
                        <div class="stat-label">Producers</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">4.9</div>
                        <div class="stat-label">Rating</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">5</div>
                        <div class="stat-label">Flavors</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">100%</div>
                        <div class="stat-label">Royalty-Free</div>
                    </div>
                </div>
            </div>

            <div class="hero-right">
                <div class="plugin-mockup" id="pluginMockup">
                    <div class="plugin-header">
                        <div class="plugin-name">Carbonator</div>
                        <div class="plugin-menu">=</div>
                    </div>
                    <div class="plugin-subtitle">Carbinated Audio</div>

                    <div class="plugin-knob-section">
                        <div class="plugin-fizz-label">FIZZ</div>

                        <div class="knob-wrapper">
                            <!-- Corner parameter knobs -->
                            <div class="corner-knob tl"></div>
                            <div class="corner-knob tr"></div>
                            <div class="corner-knob bl"></div>
                            <div class="corner-knob br"></div>

                            <!-- Main knob -->
                            <div class="knob-container" id="knobContainer">
                                <!-- Tick marks SVG -->
                                <svg class="knob-ticks-svg" viewBox="0 0 240 240" id="knobTicks">
                                    <!-- Ticks generated by JS -->
                                </svg>

                                <!-- Arc fill SVG -->
                                <svg class="knob-arc-track" viewBox="0 0 230 230" id="knobArc">
                                    <circle cx="115" cy="115" r="105" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="3"
                                        stroke-dasharray="5 5"
                                        transform="rotate(135, 115, 115)"
                                        stroke-dashoffset="0"/>
                                    <path id="arcFill" fill="none" stroke="url(#arcGrad)" stroke-width="4" stroke-linecap="round"/>
                                    <defs>
                                        <linearGradient id="arcGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                            <stop offset="0%" stop-color="#ff6b2b"/>
                                            <stop offset="50%" stop-color="#ff3366"/>
                                            <stop offset="100%" stop-color="#cc33ff"/>
                                        </linearGradient>
                                    </defs>
                                </svg>

                                <div class="knob-outer idle-pulse" id="knobOuter">
                                    <div class="knob-highlight"></div>
                                    <div class="knob-indicator" id="knobIndicator"></div>
                                </div>
                            </div>
                        </div>

                        <div class="knob-value" id="knobValue">100%</div>
                    </div>

                    <div class="plugin-bottom">
                        <div class="plugin-flavor-section">
                            <div class="plugin-flavor-label">FLAVOR</div>
                            <select class="plugin-flavor-select" id="pluginFlavorSelect">
                                <option value="cola">COLA</option>
                                <option value="cherry">CHERRY</option>
                                <option value="grape">GRAPE</option>
                                <option value="lemon-lime">LEMON-LIME</option>
                                <option value="orange-cream">ORANGE CREAM</option>
                            </select>
                        </div>
                        <div class="plugin-carbonated">
                            <div class="plugin-carbonated-label">CARBONATED</div>
                            <div class="toggle-switch" id="carbonatedToggle"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Flavors Section -->
        <section class="flavors-section" id="features">
            <div class="section-label">5 DSP FLAVORS</div>
            <h2 class="section-title">Pick Your <span class="accent">Flavor</span></h2>
            <p class="section-desc">
                Each flavor is a carefully engineered DSP chain. One knob &mdash; <strong>Fizz</strong> &mdash; morphs all parameters simultaneously from subtle to savage.
            </p>

            <div class="flavor-tabs">
                <button class="flavor-tab active" data-flavor="cola"><span class="emoji">&#127866;</span> COLA</button>
                <button class="flavor-tab" data-flavor="cherry"><span class="emoji">&#127826;</span> CHERRY</button>
                <button class="flavor-tab" data-flavor="grape"><span class="emoji">&#127815;</span> GRAPE</button>
                <button class="flavor-tab" data-flavor="lemon-lime"><span class="emoji">&#127819;</span> LEMON-LIME</button>
                <button class="flavor-tab" data-flavor="orange-cream"><span class="emoji">&#127842;</span> ORANGE CREAM</button>
            </div>

            <!-- Flavor Details -->
            <div class="flavor-detail" id="flavor-detail">
                <!-- Cola (default) -->
                <div class="flavor-detail-header cola" id="flavor-header">
                    <div class="flavor-detail-info">
                        <span class="flavor-detail-emoji" id="flavor-emoji">&#127866;</span>
                        <div>
                            <div class="flavor-detail-name" id="flavor-name">COLA</div>
                            <div class="flavor-detail-tagline" id="flavor-tagline">Analog Console Warmth</div>
                        </div>
                    </div>
                    <div class="flavor-detail-tags" id="flavor-tags">
                        <span class="flavor-tag">Drums</span>
                        <span class="flavor-tag">Full Mix</span>
                        <span class="flavor-tag">Bass</span>
                        <span class="flavor-tag">Guitars</span>
                    </div>
                </div>

                <div style="padding: 16px 40px; background: var(--bg-card-darker);">
                    <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.7;" id="flavor-description">
                        Console-style saturation that glues your mix with even harmonics, subtle compression, and the warmth of classic analog hardware.
                    </p>
                </div>

                <div class="flavor-detail-body">
                    <div class="signal-chain">
                        <div class="detail-section-title">SIGNAL CHAIN</div>
                        <div class="chain-badge" id="chain-input">&darr; INPUT</div>

                        <div id="chain-items">
                            <div class="chain-item">
                                <div class="chain-item-dot"></div>
                                <div>
                                    <span class="chain-item-name">Pre-Gain</span>
                                    <span class="chain-item-desc"> &mdash; Drive 1x&ndash;6x via Fizz</span>
                                </div>
                            </div>
                            <div class="chain-item">
                                <div class="chain-item-dot"></div>
                                <div>
                                    <span class="chain-item-name">Asymmetric Soft Clip</span>
                                    <span class="chain-item-desc"> &mdash; x/(1+|x|) + 0.1 DC bias &rarr; even harmonics</span>
                                </div>
                            </div>
                            <div class="chain-item">
                                <div class="chain-item-dot"></div>
                                <div>
                                    <span class="chain-item-name">DC Blocker</span>
                                    <span class="chain-item-desc"> &mdash; HPF @ 5Hz</span>
                                </div>
                            </div>
                            <div class="chain-item">
                                <div class="chain-item-dot"></div>
                                <div>
                                    <span class="chain-item-name">Compressor</span>
                                    <span class="chain-item-desc"> &mdash; Ratio 1.5:1&ndash;8:1 &middot; Threshold &ndash;6 to &ndash;30dB &middot; Attack 10ms</span>
                                </div>
                            </div>
                            <div class="chain-item">
                                <div class="chain-item-dot"></div>
                                <div>
                                    <span class="chain-item-name">Tilt EQ</span>
                                    <span class="chain-item-desc"> &mdash; Low shelf +0&ndash;4dB @ 200Hz &middot; High shelf 0 to &ndash;3dB @ 8kHz</span>
                                </div>
                            </div>
                            <div class="chain-item">
                                <div class="chain-item-dot"></div>
                                <div>
                                    <span class="chain-item-name">Auto Makeup Gain</span>
                                    <span class="chain-item-desc"> &mdash; 0&ndash;6dB via Fizz</span>
                                </div>
                            </div>
                        </div>

                        <div class="chain-badge">&darr; OUTPUT</div>

                        <div class="flat-mode-box" id="flat-mode">
                            <span>FLAT MODE:</span> Tape saturation layer + 60Hz hum
                        </div>
                    </div>

                    <div class="param-map">
                        <div class="detail-section-title">FIZZ KNOB &rarr; PARAMETER MAP</div>

                        <div id="param-rows">
                            <div class="param-row">
                                <div class="param-row-header">
                                    <span class="param-name">DRIVE</span>
                                    <span class="param-range">1x &rarr; 6x</span>
                                </div>
                                <div class="param-bar"><div class="param-bar-fill" style="width: 100%"></div></div>
                            </div>
                            <div class="param-row">
                                <div class="param-row-header">
                                    <span class="param-name">COMP RATIO</span>
                                    <span class="param-range">1.5:1 &rarr; 8:1</span>
                                </div>
                                <div class="param-bar"><div class="param-bar-fill" style="width: 85%"></div></div>
                            </div>
                            <div class="param-row">
                                <div class="param-row-header">
                                    <span class="param-name">THRESHOLD</span>
                                    <span class="param-range">&ndash;6dB &rarr; &ndash;30dB</span>
                                </div>
                                <div class="param-bar"><div class="param-bar-fill" style="width: 90%"></div></div>
                            </div>
                            <div class="param-row">
                                <div class="param-row-header">
                                    <span class="param-name">LOW SHELF</span>
                                    <span class="param-range">0 &rarr; +4dB</span>
                                </div>
                                <div class="param-bar"><div class="param-bar-fill" style="width: 60%"></div></div>
                            </div>
                            <div class="param-row">
                                <div class="param-row-header">
                                    <span class="param-name">HIGH SHELF</span>
                                    <span class="param-range">0 &rarr; &ndash;3dB</span>
                                </div>
                                <div class="param-bar"><div class="param-bar-fill" style="width: 50%"></div></div>
                            </div>
                            <div class="param-row">
                                <div class="param-row-header">
                                    <span class="param-name">MAKEUP</span>
                                    <span class="param-range">0 &rarr; +6dB</span>
                                </div>
                                <div class="param-bar"><div class="param-bar-fill" style="width: 70%"></div></div>
                            </div>
                        </div>

                        <div class="fizz-visualizer">
                            <div class="fizz-vis-header">
                                <span class="fizz-vis-label">FIZZ</span>
                                <span class="fizz-vis-method">Linear interpolation via jmap()</span>
                            </div>
                            <div class="fizz-vis-bar">
                                <span class="fizz-vis-num">0</span>
                                <div class="fizz-dots">
                                    <div class="fizz-dot"></div><div class="fizz-dot"></div><div class="fizz-dot"></div>
                                    <div class="fizz-dot"></div><div class="fizz-dot"></div><div class="fizz-dot"></div>
                                    <div class="fizz-dot"></div><div class="fizz-dot"></div><div class="fizz-dot"></div>
                                    <div class="fizz-dot"></div><div class="fizz-dot"></div><div class="fizz-dot"></div>
                                    <div class="fizz-dot"></div><div class="fizz-dot"></div><div class="fizz-dot"></div>
                                    <div class="fizz-dot"></div><div class="fizz-dot"></div><div class="fizz-dot"></div>
                                    <div class="fizz-dot"></div><div class="fizz-dot"></div><div class="fizz-dot"></div>
                                    <div class="fizz-dot"></div><div class="fizz-dot"></div><div class="fizz-dot"></div>
                                </div>
                                <span class="fizz-vis-num">100</span>
                            </div>
                            <div class="fizz-vis-caption">All parameters morph simultaneously &mdash; zero clicks required</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Demos Section -->
        <section class="demos-section" id="demos">
            <div class="section-label">HEAR THE DIFFERENCE</div>
            <h2 class="section-title">Listen to <span class="accent">Carbonator</span> in Action</h2>
            <p class="section-desc">
                Use the slider to blend between dry and wet signals. Experience the sonic transformation for yourself.
            </p>

            <div class="demo-player" id="demoPlayer">
                <div class="demo-player-top">
                    <div class="demo-player-category">DRUMS / FULL MIX</div>
                    <div class="demo-player-flavor" id="demo-flavor-name">COLA</div>
                    <div class="demo-player-badge" id="demo-badge">Analog Console Warmth</div>

                    <div class="waveform-container" id="waveformContainer">
                        <canvas class="waveform-canvas" id="waveformCanvas"></canvas>
                        <div class="playhead" id="playhead"></div>
                    </div>

                    <div class="demo-progress-bar" id="progressBar">
                        <div class="demo-progress-fill" id="progressFill"></div>
                    </div>

                    <div class="demo-time">
                        <span class="demo-time-text" id="demoTimeText">0:00 / 0:44</span>
                        <span class="demo-time-text" id="demoWetLabel">50% Wet</span>
                    </div>
                </div>

                <div class="demo-player-controls">
                    <button class="play-btn" id="playBtn">
                        <svg viewBox="0 0 24 24" id="playIcon"><polygon points="5,3 19,12 5,21"/></svg>
                    </button>
                    <div class="slider-container">
                        <span class="slider-label">DRY</span>
                        <div class="slider-track">
                            <span class="slider-percentage">50% WET</span>
                            <input type="range" class="slider-input" min="0" max="100" value="50">
                        </div>
                        <span class="slider-label">WET</span>
                    </div>
                    <div class="demo-controls-right">
                        <button class="demo-icon-btn" title="Volume">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                                <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
                                <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
                            </svg>
                        </button>
                        <button class="demo-icon-btn" title="Loop">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="17 1 21 5 17 9"/>
                                <path d="M3 11V9a4 4 0 0 1 4-4h14"/>
                                <polyline points="7 23 3 19 7 15"/>
                                <path d="M21 13v2a4 4 0 0 1-4 4H3"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <div class="demo-flavor-tabs">
                <button class="demo-flavor-tab active" data-demo="cola">COLA</button>
                <button class="demo-flavor-tab" data-demo="cherry">CHERRY</button>
                <button class="demo-flavor-tab" data-demo="grape">GRAPE</button>
                <button class="demo-flavor-tab" data-demo="lemon-lime">LEMON-LIME</button>
                <button class="demo-flavor-tab" data-demo="orange-cream">ORANGE CREAM</button>
            </div>
        </section>

        <!-- Compatibility Section -->
        <section class="compat-section" id="compatibility">
            <div class="section-label">WORKS EVERYWHERE</div>
            <h2 class="section-title">Full <span class="accent">Compatibility</span></h2>
            <p class="section-desc">
                Carbonator runs natively on Apple Silicon and Intel, in every major DAW. No compromises.
            </p>

            <div class="compat-grid">
                <!-- DAWs -->
                <div class="compat-card">
                    <div class="compat-card-icon daw">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/>
                        </svg>
                    </div>
                    <div class="compat-card-title">DAWs</div>
                    <ul class="compat-list">
                        <li><span class="compat-check">&check;</span> Pro Tools <span class="compat-version">2023+</span></li>
                        <li><span class="compat-check">&check;</span> Logic Pro <span class="compat-version">10.7+</span></li>
                        <li><span class="compat-check">&check;</span> Ableton Live <span class="compat-version">11+</span></li>
                        <li><span class="compat-check">&check;</span> FL Studio <span class="compat-version">21+</span></li>
                        <li><span class="compat-check">&check;</span> Studio One <span class="compat-version">6+</span></li>
                        <li><span class="compat-check">&check;</span> Cubase / Nuendo <span class="compat-version">13+</span></li>
                        <li><span class="compat-check">&check;</span> REAPER <span class="compat-version">7+</span></li>
                        <li><span class="compat-check">&check;</span> Luna <span class="compat-version">1.0+</span></li>
                    </ul>
                </div>

                <!-- Formats -->
                <div class="compat-card">
                    <div class="compat-card-icon format">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/>
                        </svg>
                    </div>
                    <div class="compat-card-title">Plugin Formats</div>
                    <ul class="compat-list">
                        <li><span class="compat-check">&check;</span> VST3 <span class="compat-version">Universal</span></li>
                        <li><span class="compat-check">&check;</span> Audio Units (AU) <span class="compat-version">Universal</span></li>
                        <li><span class="compat-check">&check;</span> AAX Native <span class="compat-version">PACE Signed</span></li>
                        <li><span class="compat-check">&check;</span> Standalone App <span class="compat-version">Universal</span></li>
                    </ul>
                    <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--border);">
                        <div style="font-size: 12px; font-weight: 600; color: var(--text-muted); letter-spacing: 1px; margin-bottom: 10px;">SIGNED &amp; VERIFIED</div>
                        <ul class="compat-list">
                            <li><span class="compat-check">&check;</span> Apple Notarized</li>
                            <li><span class="compat-check">&check;</span> Developer ID Signed</li>
                            <li><span class="compat-check">&check;</span> PACE/iLok Wrapped (AAX)</li>
                        </ul>
                    </div>
                </div>

                <!-- System Requirements -->
                <div class="compat-card">
                    <div class="compat-card-icon os">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/>
                        </svg>
                    </div>
                    <div class="compat-card-title">System Requirements</div>
                    <ul class="compat-list">
                        <li><span class="compat-check">&check;</span> macOS 10.13+ <span class="compat-version">High Sierra+</span></li>
                        <li><span class="compat-check">&check;</span> Apple Silicon (M1/M2/M3/M4) <span class="compat-version">Native</span></li>
                        <li><span class="compat-check">&check;</span> Intel x86_64 <span class="compat-version">Native</span></li>
                        <li><span class="compat-check">&check;</span> Universal Binary <span class="compat-version">arm64 + x86_64</span></li>
                    </ul>
                    <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--border);">
                        <ul class="compat-list">
                            <li><span class="compat-check">&check;</span> Windows 10/11 <span class="compat-version">VST3 + Standalone</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="compat-badges">
                <div class="compat-badge"><div class="badge-dot"></div> Gatekeeper Approved</div>
                <div class="compat-badge"><div class="badge-dot"></div> No iLok Dongle Required</div>
                <div class="compat-badge"><div class="badge-dot"></div> Zero Latency</div>
                <div class="compat-badge"><div class="badge-dot"></div> Royalty-Free</div>
            </div>

        </section>

        <!-- Pricing Section -->
        <section class="pricing-section" id="pricing">
            <div class="section-label">SIMPLE PRICING</div>
            <h2 class="section-title">Get <span class="accent">Carbonator</span></h2>
            <p class="section-desc">
                No subscriptions. No upsells. Pay once, own it forever. All 5 flavors included.
            </p>

            <div class="pricing-container">
                <!-- Free Trial -->
                <div class="pricing-card">
                    <div class="pricing-card-header">
                        <div class="pricing-card-name">Free Trial</div>
                        <div class="pricing-card-desc">Try before you buy</div>
                    </div>
                    <div class="pricing-price">
                        <span class="pricing-dollar">$</span><span class="pricing-amount">0</span>
                        <div class="pricing-period">forever</div>
                    </div>
                    <ul class="pricing-features">
                        <li><span class="check">&check;</span> All 5 DSP flavors</li>
                        <li><span class="check">&check;</span> Full plugin UI</li>
                        <li><span class="check">&check;</span> VST3, AU, AAX, Standalone</li>
                        <li><span class="cross">&times;</span> <span style="opacity:0.5;">Audio muted 10s every 60s</span></li>
                        <li><span class="cross">&times;</span> <span style="opacity:0.5;">No offline rendering</span></li>
                    </ul>
                    <a href="#" class="pricing-btn pricing-btn-outline" onclick="openDemoGate(event)">Download Free Trial</a>
                </div>

                <!-- Full License -->
                <div class="pricing-card featured">
                    <div class="pricing-popular">LAUNCH SPECIAL</div>
                    <div class="pricing-card-header">
                        <div class="pricing-card-name">Full License</div>
                        <div class="pricing-card-desc">Everything, forever</div>
                    </div>
                    <div class="pricing-price">
                        <div class="pricing-launch-badge">LAUNCH PRICE</div>
                        <div>
                            <span class="pricing-original">$20</span>
                            <span class="pricing-dollar">$</span><span class="pricing-amount">14<span style="font-size:0.5em;vertical-align:super">.99</span></span>
                        </div>
                        <div class="pricing-period">one-time payment &mdash; limited time</div>
                    </div>
                    <ul class="pricing-features">
                        <li><span class="check">&check;</span> All 5 DSP flavors</li>
                        <li><span class="check">&check;</span> Carbonated + Flat modes</li>
                        <li><span class="check">&check;</span> VST3, AU, AAX, Standalone</li>
                        <li><span class="check">&check;</span> macOS + Windows</li>
                        <li><span class="check">&check;</span> Unlimited offline rendering</li>
                        <li><span class="check">&check;</span> Free updates for life</li>
                        <li><span class="check">&check;</span> Use on up to 3 machines</li>
                    </ul>
                    <a href="https://buy.stripe.com/aFafZhgbffRw6nv0UH3oA00?prefilled_promo_code=LAUNCH25" class="pricing-btn pricing-btn-primary">Buy Now &mdash; $14.99</a>
                </div>

            </div>

            <div class="pricing-guarantee">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    <polyline points="9 12 11 14 15 10"/>
                </svg>
                30-day money-back guarantee &mdash; no questions asked
            </div>
        </section>

        <!-- Testimonials Section -->
        <section class="testimonials-section" id="reviews">
            <div class="section-label">WHAT PRODUCERS SAY</div>
            <h2 class="section-title">Trusted by <span class="accent">producers</span></h2>
            <p class="section-desc">
                Hear from producers who use Carbonator in their workflow every day.
            </p>

            <div class="testimonial-grid">
                <div class="testimonial-card">
                    <div class="testimonial-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
                    <p class="testimonial-text">"I've tried saturation plugins 3x the price that don't sound this good. The Cola flavor on drums is insane &mdash; instant warmth without the mud."</p>
                    <div class="testimonial-author">
                        <div class="testimonial-avatar">JR</div>
                        <div>
                            <div class="testimonial-name">Jordan R.</div>
                            <div class="testimonial-role">Hip-Hop Producer</div>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
                    <p class="testimonial-text">"Carbonator lives on my mix bus now. The one-knob workflow is genius &mdash; dial in the right amount, pick a flavor, done. No menu diving."</p>
                    <div class="testimonial-author">
                        <div class="testimonial-avatar">AK</div>
                        <div>
                            <div class="testimonial-name">Alex K.</div>
                            <div class="testimonial-role">Mixing Engineer</div>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="testimonial-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
                    <p class="testimonial-text">"The Grape flavor on vocals gives me that lo-fi character I used to spend forever trying to recreate. Under $15 is a steal for what this does."</p>
                    <div class="testimonial-author">
                        <div class="testimonial-avatar">MP</div>
                        <div>
                            <div class="testimonial-name">Maya P.</div>
                            <div class="testimonial-role">Singer / Producer</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="site-footer">
            <div class="footer-left">
                <div class="footer-logo">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                    </svg>
                </div>
                <span class="footer-text">&copy; 2026 Carbinated Audio. All rights reserved.</span>
            </div>
            <div class="footer-links">
                <a href="#">Terms</a>
                <a href="#">Privacy</a>
                <a href="#">Support</a>
                <a href="#">Contact</a>
            </div>
        </footer>
    </div>

    <script>
        // ========================================
        // Interactive Knob
        // ========================================
        (function() {
            const knobContainer = document.getElementById('knobContainer');
            const knobOuter = document.getElementById('knobOuter');
            const knobIndicator = document.getElementById('knobIndicator');
            const knobValue = document.getElementById('knobValue');
            const ticksSvg = document.getElementById('knobTicks');
            const arcSvg = document.getElementById('knobArc');
            const arcFill = document.getElementById('arcFill');
            const toggle = document.getElementById('carbonatedToggle');

            let value = 1.0; // 0 to 1
            let isDragging = false;
            let dragStartY = 0;
            let dragStartValue = 0;

            const MIN_ANGLE = -135; // 0%
            const MAX_ANGLE = 135;  // 100%

            // Generate tick marks
            function generateTicks() {
                const cx = 120, cy = 120, r = 110;
                const totalTicks = 31;
                let svg = '';
                for (let i = 0; i < totalTicks; i++) {
                    const frac = i / (totalTicks - 1);
                    const angleDeg = -135 + frac * 270;
                    const angleRad = angleDeg * Math.PI / 180;
                    const isMajor = i % 5 === 0;
                    const len = isMajor ? 10 : 6;
                    const x1 = cx + (r - len) * Math.sin(angleRad);
                    const y1 = cy - (r - len) * Math.cos(angleRad);
                    const x2 = cx + r * Math.sin(angleRad);
                    const y2 = cy - r * Math.cos(angleRad);
                    const opacity = frac <= value ? 1 : 0.2;
                    const color = frac <= value ? '#ff6b2b' : '#3a3050';
                    svg += `<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" stroke="${color}" stroke-width="${isMajor ? 2.5 : 1.5}" stroke-linecap="round" opacity="${opacity}"/>`;
                }
                ticksSvg.innerHTML = svg;
            }

            // Generate arc fill
            function generateArc() {
                const cx = 115, cy = 115, r = 105;
                const startAngle = (-135 - 90) * Math.PI / 180;
                const endAngleDeg = -135 + value * 270;
                const endAngle = (endAngleDeg - 90) * Math.PI / 180;

                if (value <= 0.001) {
                    arcFill.setAttribute('d', '');
                    return;
                }

                const x1 = cx + r * Math.cos(startAngle);
                const y1 = cy + r * Math.sin(startAngle);
                const x2 = cx + r * Math.cos(endAngle);
                const y2 = cy + r * Math.sin(endAngle);
                const largeArc = value * 270 > 180 ? 1 : 0;

                arcFill.setAttribute('d', `M ${x1} ${y1} A ${r} ${r} 0 ${largeArc} 1 ${x2} ${y2}`);
            }

            // Update visuals
            function updateKnob() {
                const angleDeg = MIN_ANGLE + value * (MAX_ANGLE - MIN_ANGLE);
                knobIndicator.style.transform = `translateX(-50%) rotate(${angleDeg}deg)`;
                knobValue.textContent = Math.round(value * 100) + '%';
                generateTicks();
                generateArc();

                // Glow intensity scales with value
                const glowIntensity = 0.3 + value * 0.4;
                const spreadIntensity = 60 + value * 40;
                knobOuter.style.boxShadow = `
                    0 6px ${spreadIntensity}px rgba(255, 50, 80, ${glowIntensity}),
                    0 0 ${spreadIntensity + 20}px rgba(255, 50, 80, ${glowIntensity * 0.4}),
                    inset 0 -4px 12px rgba(0, 0, 0, 0.4),
                    inset 0 4px 12px rgba(255, 120, 120, ${0.1 + value * 0.15})
                `;
            }

            // Mouse/touch drag
            function onDragStart(e) {
                isDragging = true;
                dragStartY = e.clientY || e.touches[0].clientY;
                dragStartValue = value;
                knobOuter.classList.remove('idle-pulse');
                knobOuter.classList.add('active');
                document.body.style.cursor = 'grabbing';
                e.preventDefault();
            }

            function onDragMove(e) {
                if (!isDragging) return;
                const clientY = e.clientY || (e.touches && e.touches[0].clientY) || 0;
                const delta = (dragStartY - clientY) / 200; // drag sensitivity
                value = Math.max(0, Math.min(1, dragStartValue + delta));
                updateKnob();
                e.preventDefault();
            }

            function onDragEnd() {
                if (!isDragging) return;
                isDragging = false;
                knobOuter.classList.remove('active');
                knobOuter.classList.add('idle-pulse');
                document.body.style.cursor = '';
            }

            // Mouse wheel
            knobContainer.addEventListener('wheel', (e) => {
                e.preventDefault();
                const delta = -e.deltaY / 1000;
                value = Math.max(0, Math.min(1, value + delta));
                knobOuter.classList.remove('idle-pulse');
                updateKnob();
                clearTimeout(knobContainer._wheelTimeout);
                knobContainer._wheelTimeout = setTimeout(() => {
                    knobOuter.classList.add('idle-pulse');
                }, 500);
            }, { passive: false });

            // Double click to reset to 50%
            knobContainer.addEventListener('dblclick', () => {
                value = 0.5;
                updateKnob();
                knobValue.classList.add('bump');
                setTimeout(() => knobValue.classList.remove('bump'), 150);
            });

            knobContainer.addEventListener('mousedown', onDragStart);
            knobContainer.addEventListener('touchstart', onDragStart, { passive: false });
            document.addEventListener('mousemove', onDragMove);
            document.addEventListener('touchmove', onDragMove, { passive: false });
            document.addEventListener('mouseup', onDragEnd);
            document.addEventListener('touchend', onDragEnd);

            // Carbonated toggle
            let carbonated = true;
            toggle.addEventListener('click', () => {
                carbonated = !carbonated;
                toggle.classList.toggle('off', !carbonated);
            });

            // Initial render
            updateKnob();
        })();

        // ========================================
        // Flavor Data & Tabs
        // ========================================

        // Flavor data
        const flavors = {
            cola: {
                emoji: '&#127866;',
                name: 'COLA',
                tagline: 'Analog Console Warmth',
                headerClass: 'cola',
                tags: ['Drums', 'Full Mix', 'Bass', 'Guitars'],
                description: 'Console-style saturation that glues your mix with even harmonics, subtle compression, and the warmth of classic analog hardware.',
                chain: [
                    { name: 'Pre-Gain', desc: 'Drive 1x\u20136x via Fizz' },
                    { name: 'Asymmetric Soft Clip', desc: 'x/(1+|x|) + 0.1 DC bias \u2192 even harmonics' },
                    { name: 'DC Blocker', desc: 'HPF @ 5Hz' },
                    { name: 'Compressor', desc: 'Ratio 1.5:1\u20138:1 \u00b7 Threshold \u20136 to \u201330dB \u00b7 Attack 10ms' },
                    { name: 'Tilt EQ', desc: 'Low shelf +0\u20134dB @ 200Hz \u00b7 High shelf 0 to \u20133dB @ 8kHz' },
                    { name: 'Auto Makeup Gain', desc: '0\u20136dB via Fizz' }
                ],
                params: [
                    { name: 'DRIVE', range: '1x \u2192 6x', width: 100 },
                    { name: 'COMP RATIO', range: '1.5:1 \u2192 8:1', width: 85 },
                    { name: 'THRESHOLD', range: '\u20136dB \u2192 \u201330dB', width: 90 },
                    { name: 'LOW SHELF', range: '0 \u2192 +4dB', width: 60 },
                    { name: 'HIGH SHELF', range: '0 \u2192 \u20133dB', width: 50 },
                    { name: 'MAKEUP', range: '0 \u2192 +6dB', width: 70 }
                ],
                flatMode: 'Tape saturation layer + 60Hz hum'
            },
            cherry: {
                emoji: '&#127826;',
                name: 'CHERRY',
                tagline: 'Aggressive Tube Distortion',
                headerClass: 'cherry',
                tags: ['Vocals', 'Synths', 'Drums', 'Parallel'],
                description: 'Tube-style distortion with odd harmonics and aggressive clipping. From subtle grit to full-on fuzz, Cherry delivers raw energy.',
                chain: [
                    { name: 'Pre-Gain', desc: 'Drive 1x\u201310x via Fizz' },
                    { name: 'Tube Waveshaper', desc: 'tanh(x \u00b7 drive) \u2192 odd harmonics' },
                    { name: 'DC Blocker', desc: 'HPF @ 5Hz' },
                    { name: 'Presence EQ', desc: 'Bell +0\u20136dB @ 3kHz' },
                    { name: 'Output Limiter', desc: 'Soft knee at \u20131dB' },
                    { name: 'Auto Makeup Gain', desc: '0\u20138dB via Fizz' }
                ],
                params: [
                    { name: 'DRIVE', range: '1x \u2192 10x', width: 100 },
                    { name: 'PRESENCE', range: '0 \u2192 +6dB', width: 75 },
                    { name: 'ODD HARMONICS', range: 'Low \u2192 High', width: 90 },
                    { name: 'LIMITER KNEE', range: 'Soft \u2192 Hard', width: 60 },
                    { name: 'MAKEUP', range: '0 \u2192 +8dB', width: 80 }
                ],
                flatMode: 'Transistor clipping + high shelf cut'
            },
            grape: {
                emoji: '&#127815;',
                name: 'GRAPE',
                tagline: 'Bitcrusher & Lo-Fi',
                headerClass: 'grape',
                tags: ['Lo-Fi', 'Drums', 'Synths', 'Creative'],
                description: 'Digital destruction with bit reduction and sample rate decimation. Grape crushes your signal into crunchy, retro lo-fi textures.',
                chain: [
                    { name: 'Pre-Gain', desc: 'Drive 1x\u20134x via Fizz' },
                    { name: 'Bit Crusher', desc: '16-bit \u2192 4-bit via Fizz' },
                    { name: 'Sample Rate Decimate', desc: '44.1kHz \u2192 4kHz via Fizz' },
                    { name: 'Jitter', desc: '0\u201320% random noise via Fizz' },
                    { name: 'LP Filter', desc: 'Smoothing 20kHz \u2192 6kHz' },
                    { name: 'Auto Makeup Gain', desc: '0\u20134dB via Fizz' }
                ],
                params: [
                    { name: 'BIT DEPTH', range: '16-bit \u2192 4-bit', width: 100 },
                    { name: 'SAMPLE RATE', range: '44.1kHz \u2192 4kHz', width: 90 },
                    { name: 'JITTER', range: '0% \u2192 20%', width: 50 },
                    { name: 'DRIVE', range: '1x \u2192 4x', width: 65 },
                    { name: 'LP CUTOFF', range: '20kHz \u2192 6kHz', width: 70 },
                    { name: 'MAKEUP', range: '0 \u2192 +4dB', width: 55 }
                ],
                flatMode: 'Vinyl noise + wow & flutter'
            },
            'lemon-lime': {
                emoji: '&#127819;',
                name: 'LEMON-LIME',
                tagline: 'Bright Harmonic Exciter',
                headerClass: 'lemon-lime',
                tags: ['Vocals', 'Acoustic', 'Mix Bus', 'Cymbals'],
                description: 'Harmonic exciter that adds sparkle and air without harshness. Lemon-Lime enhances presence and clarity with musical high-frequency saturation.',
                chain: [
                    { name: 'HP Filter', desc: 'Extract above 3kHz for processing' },
                    { name: 'Harmonic Generator', desc: '2nd + 3rd harmonics via Fizz' },
                    { name: 'Air Shelf', desc: '+0\u20136dB @ 12kHz via Fizz' },
                    { name: 'Dynamic Saturation', desc: 'Level-dependent soft clip' },
                    { name: 'Mix Blend', desc: 'Parallel blend with dry' },
                    { name: 'Auto Makeup Gain', desc: '0\u20133dB via Fizz' }
                ],
                params: [
                    { name: 'HARMONICS', range: 'Subtle \u2192 Bright', width: 100 },
                    { name: 'AIR SHELF', range: '0 \u2192 +6dB', width: 75 },
                    { name: 'HP CROSSOVER', range: '3kHz \u2192 1kHz', width: 60 },
                    { name: 'SATURATION', range: 'Light \u2192 Heavy', width: 80 },
                    { name: 'MAKEUP', range: '0 \u2192 +3dB', width: 45 }
                ],
                flatMode: 'Subtle stereo widening + de-essing'
            },
            'orange-cream': {
                emoji: '&#127842;',
                name: 'ORANGE CREAM',
                tagline: 'Resonant Filter + Drive',
                headerClass: 'orange-cream',
                tags: ['Synths', 'Bass', 'Pads', 'Creative'],
                description: 'Resonant lowpass filter with warm drive. Orange Cream sweeps from open and clean to thick, squelchy filter tones with musical resonance.',
                chain: [
                    { name: 'Pre-Drive', desc: 'Warm drive 1x\u20132.5x via Fizz' },
                    { name: 'Resonant LP Filter', desc: '20kHz \u2192 200Hz via Fizz' },
                    { name: 'Resonance', desc: 'Q 0.7 \u2192 4.0 via Fizz' },
                    { name: 'Low Shelf Boost', desc: '+0\u20133dB @ 150Hz' },
                    { name: 'Soft Saturator', desc: 'Post-filter warmth' },
                    { name: 'Auto Makeup Gain', desc: '0\u20134dB via Fizz' }
                ],
                params: [
                    { name: 'DRIVE', range: '1x \u2192 2.5x', width: 65 },
                    { name: 'LP CUTOFF', range: '20kHz \u2192 200Hz', width: 100 },
                    { name: 'RESONANCE', range: '0.7 \u2192 4.0', width: 80 },
                    { name: 'LOW SHELF', range: '0 \u2192 +3dB', width: 50 },
                    { name: 'SATURATION', range: 'Light \u2192 Warm', width: 60 },
                    { name: 'MAKEUP', range: '0 \u2192 +4dB', width: 55 }
                ],
                flatMode: 'Dirtier \u2014 tanh drive (1.5\u21924x), LP to 100Hz, more resonance'
            }
        };

        // Flavor tab switching
        document.querySelectorAll('.flavor-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.flavor-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                const key = tab.dataset.flavor;
                const f = flavors[key];

                document.getElementById('flavor-header').className = 'flavor-detail-header ' + f.headerClass;
                document.getElementById('flavor-emoji').innerHTML = f.emoji;
                document.getElementById('flavor-name').textContent = f.name;
                document.getElementById('flavor-tagline').textContent = f.tagline;
                document.getElementById('flavor-tags').innerHTML = f.tags.map(t => `<span class="flavor-tag">${t}</span>`).join('');
                document.getElementById('flavor-description').textContent = f.description;
                document.getElementById('flat-mode').innerHTML = `<span>FLAT MODE:</span> ${f.flatMode}`;

                document.getElementById('chain-items').innerHTML = f.chain.map(c =>
                    `<div class="chain-item"><div class="chain-item-dot"></div><div><span class="chain-item-name">${c.name}</span><span class="chain-item-desc"> \u2014 ${c.desc}</span></div></div>`
                ).join('');

                document.getElementById('param-rows').innerHTML = f.params.map(p =>
                    `<div class="param-row"><div class="param-row-header"><span class="param-name">${p.name}</span><span class="param-range">${p.range}</span></div><div class="param-bar"><div class="param-bar-fill" style="width: ${p.width}%"></div></div></div>`
                ).join('');
            });
        });

        // ========================================
        // Web Audio Demo Player with Dry/Wet Crossfade
        // ========================================
        (function() {
            const canvas = document.getElementById('waveformCanvas');
            const ctx = canvas.getContext('2d');
            const playBtn = document.getElementById('playBtn');
            const playIcon = document.getElementById('playIcon');
            const playhead = document.getElementById('playhead');
            const progressFill = document.getElementById('progressFill');
            const progressBar = document.getElementById('progressBar');
            const timeText = document.getElementById('demoTimeText');
            const waveContainer = document.getElementById('waveformContainer');
            const slider = document.querySelector('.slider-input');
            const percentLabel = document.querySelector('.slider-percentage');
            const demoWetLabel = document.getElementById('demoWetLabel');

            let audioCtx = null;
            let dryBuffer = null, wetBuffer = null;
            let drySource = null, wetSource = null;
            let dryGain = null, wetGain = null;
            let isPlaying = false;
            let startTime = 0;
            let pauseOffset = 0;
            let progress = 0;
            let animFrame;
            let currentFlavor = 'cola';
            let dryWaveData = [], wetWaveData = [];
            const DURATION = 44;
            const SAMPLES = 200;

            // Audio file paths
            const audioFiles = {
                dry: 'audio/dry.mp3',
                cola: 'audio/cola-wet.mp3',
                cherry: 'audio/cherry-wet.mp3',
                grape: 'audio/grape-wet.mp3',
                'lemon-lime': 'audio/lemon-lime-wet.mp3',
                'orange-cream': 'audio/orange-cream-wet.mp3'
            };

            // Cache loaded buffers
            const bufferCache = {};

            // Raw fetch cache (ArrayBuffers) — works before AudioContext exists
            const rawCache = {};

            function initAudioCtx() {
                if (!audioCtx) {
                    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                }
                // iOS Safari requires resume inside a user gesture
                if (audioCtx.state === 'suspended') {
                    audioCtx.resume();
                }
            }

            async function prefetchAudio(url) {
                if (rawCache[url]) return;
                const resp = await fetch(url);
                rawCache[url] = await resp.arrayBuffer();
            }

            async function loadAudio(url) {
                if (bufferCache[url]) return bufferCache[url];
                initAudioCtx();
                // Use prefetched data if available, otherwise fetch now
                let arrayBuf = rawCache[url];
                if (!arrayBuf) {
                    const resp = await fetch(url);
                    arrayBuf = await resp.arrayBuffer();
                }
                // decodeAudioData consumes the buffer, so remove from raw cache
                delete rawCache[url];
                const decoded = await audioCtx.decodeAudioData(arrayBuf);
                bufferCache[url] = decoded;
                return decoded;
            }

            function extractWaveform(buffer) {
                const data = buffer.getChannelData(0);
                const wave = [];
                const step = Math.floor(data.length / SAMPLES);
                for (let i = 0; i < SAMPLES; i++) {
                    let sum = 0;
                    for (let j = 0; j < step; j++) {
                        sum += Math.abs(data[i * step + j]);
                    }
                    wave.push(sum / step);
                }
                // Normalize
                const max = Math.max(...wave) || 1;
                return wave.map(v => v / max);
            }

            async function loadFlavor(flavor) {
                currentFlavor = flavor;
                dryBuffer = await loadAudio(audioFiles.dry);
                wetBuffer = await loadAudio(audioFiles[flavor]);
                dryWaveData = extractWaveform(dryBuffer);
                wetWaveData = extractWaveform(wetBuffer);
            }

            function stopPlayback() {
                if (drySource) { try { drySource.stop(); } catch(e){} drySource = null; }
                if (wetSource) { try { wetSource.stop(); } catch(e){} wetSource = null; }
            }

            function startPlayback(offset) {
                stopPlayback();
                dryGain = audioCtx.createGain();
                wetGain = audioCtx.createGain();
                updateMix();

                drySource = audioCtx.createBufferSource();
                drySource.buffer = dryBuffer;
                drySource.loop = true;
                drySource.connect(dryGain).connect(audioCtx.destination);

                wetSource = audioCtx.createBufferSource();
                wetSource.buffer = wetBuffer;
                wetSource.loop = true;
                wetSource.connect(wetGain).connect(audioCtx.destination);

                drySource.start(0, offset % DURATION);
                wetSource.start(0, offset % DURATION);
                startTime = audioCtx.currentTime - offset;
            }

            function updateMix() {
                if (!dryGain || !wetGain) return;
                const wet = parseInt(slider.value) / 100;
                dryGain.gain.value = 1 - wet;
                wetGain.gain.value = wet;
            }

            // Slider updates mix in real time
            slider.addEventListener('input', () => {
                percentLabel.textContent = `${slider.value}% WET`;
                if (demoWetLabel) demoWetLabel.textContent = `${slider.value}% Wet`;
                updateMix();
            });

            // Canvas resize
            function resizeCanvas() {
                const rect = canvas.parentElement.getBoundingClientRect();
                canvas.width = rect.width * window.devicePixelRatio;
                canvas.height = rect.height * window.devicePixelRatio;
                canvas.style.width = rect.width + 'px';
                canvas.style.height = rect.height + 'px';
                ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            // Draw real waveform from audio buffers
            function drawWaveform(time) {
                const w = canvas.clientWidth;
                const h = canvas.clientHeight;
                ctx.clearRect(0, 0, w, h);

                const wetMix = parseInt(slider.value) / 100;
                const playPos = progress * w;
                const phase = time * 0.001;

                if (dryWaveData.length > 0) {
                    // Dry waveform (blue)
                    ctx.beginPath();
                    ctx.strokeStyle = `rgba(68, 136, 204, ${0.3 + (1 - wetMix) * 0.4})`;
                    ctx.lineWidth = 1.5;
                    for (let i = 0; i < SAMPLES; i++) {
                        const x = (i / SAMPLES) * w;
                        const amp = dryWaveData[i] * (1 - wetMix * 0.3);
                        const anim = isPlaying ? Math.sin(phase + i * 0.08) * 1.5 : 0;
                        const y = h / 2 + (amp * h * 0.35 * (i % 2 === 0 ? 1 : -1)) + anim;
                        if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
                    }
                    ctx.stroke();

                    // Wet waveform (pink)
                    ctx.beginPath();
                    ctx.strokeStyle = `rgba(204, 68, 119, ${0.2 + wetMix * 0.6})`;
                    ctx.lineWidth = 2;
                    for (let i = 0; i < SAMPLES; i++) {
                        const x = (i / SAMPLES) * w;
                        const amp = wetWaveData[i] * wetMix;
                        const anim = isPlaying ? Math.sin(phase * 1.3 + i * 0.1) * 2 : 0;
                        const y = h / 2 + (amp * h * 0.4 * (i % 2 === 0 ? 1 : -1)) + anim;
                        if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
                    }
                    ctx.stroke();
                }

                // Played region glow
                if (progress > 0) {
                    const grad = ctx.createLinearGradient(0, 0, playPos, 0);
                    grad.addColorStop(0, 'rgba(255, 107, 43, 0.05)');
                    grad.addColorStop(1, 'rgba(255, 107, 43, 0.12)');
                    ctx.fillStyle = grad;
                    ctx.fillRect(0, 0, playPos, h);
                }

                playhead.style.left = playPos + 'px';
                playhead.style.display = progress > 0 ? 'block' : 'none';
                progressFill.style.width = (progress * 100) + '%';

                const current = Math.floor(progress * DURATION);
                const sec = current % 60;
                timeText.textContent = `0:${sec < 10 ? '0' + sec : sec} / 0:44`;
            }

            function animate(time) {
                if (isPlaying && audioCtx) {
                    const elapsed = audioCtx.currentTime - startTime;
                    progress = (elapsed % DURATION) / DURATION;
                }
                drawWaveform(time);
                animFrame = requestAnimationFrame(animate);
            }
            animFrame = requestAnimationFrame(animate);

            // Play/Pause — must create/resume AudioContext inside user gesture for mobile
            playBtn.addEventListener('click', async () => {
                initAudioCtx();
                if (!dryBuffer) await loadFlavor(currentFlavor);

                if (isPlaying) {
                    // Pause
                    pauseOffset = (audioCtx.currentTime - startTime) % DURATION;
                    stopPlayback();
                    isPlaying = false;
                    playIcon.innerHTML = '<polygon points="5,3 19,12 5,21"/>';
                } else {
                    // Play — ensure AudioContext is running (iOS requires this per gesture)
                    if (audioCtx.state === 'suspended') await audioCtx.resume();
                    startPlayback(pauseOffset);
                    isPlaying = true;
                    playIcon.innerHTML = '<rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/>';
                }
                playBtn.classList.toggle('playing', isPlaying);
            });

            // Seek on waveform click/tap
            function seekFromEvent(container, e) {
                const rect = container.getBoundingClientRect();
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const seekPos = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));
                pauseOffset = seekPos * DURATION;
                progress = seekPos;
                if (isPlaying) startPlayback(pauseOffset);
            }

            waveContainer.addEventListener('click', (e) => seekFromEvent(waveContainer, e));
            waveContainer.addEventListener('touchend', (e) => {
                e.preventDefault();
                const rect = waveContainer.getBoundingClientRect();
                const clientX = e.changedTouches[0].clientX;
                const seekPos = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));
                pauseOffset = seekPos * DURATION;
                progress = seekPos;
                if (isPlaying) startPlayback(pauseOffset);
            });

            progressBar.addEventListener('click', (e) => seekFromEvent(progressBar, e));
            progressBar.addEventListener('touchend', (e) => {
                e.preventDefault();
                const rect = progressBar.getBoundingClientRect();
                const clientX = e.changedTouches[0].clientX;
                const seekPos = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));
                pauseOffset = seekPos * DURATION;
                progress = seekPos;
                if (isPlaying) startPlayback(pauseOffset);
            });

            // Demo flavor tab switching (loads new audio)
            document.querySelectorAll('.demo-flavor-tab').forEach(tab => {
                tab.addEventListener('click', async () => {
                    document.querySelectorAll('.demo-flavor-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    const key = tab.dataset.demo;
                    const f = flavors[key];
                    document.getElementById('demo-flavor-name').textContent = f.name;
                    document.getElementById('demo-badge').textContent = f.tagline;

                    const wasPlaying = isPlaying;
                    if (isPlaying) {
                        pauseOffset = (audioCtx.currentTime - startTime) % DURATION;
                        stopPlayback();
                    }
                    await loadFlavor(key);
                    if (wasPlaying) {
                        startPlayback(pauseOffset);
                    }
                });
            });

            // Prefetch audio files on page load (just downloads, no AudioContext needed)
            // Decoding happens on first user tap when AudioContext is available
            prefetchAudio(audioFiles.dry).catch(() => {});
            prefetchAudio(audioFiles.cola).catch(() => {});
        })();

        // Sync plugin flavor dropdown with flavor tabs
        const pluginFlavorSelect = document.getElementById('pluginFlavorSelect');
        pluginFlavorSelect.addEventListener('change', () => {
            const key = pluginFlavorSelect.value;
            // Activate corresponding flavor tab
            document.querySelectorAll('.flavor-tab').forEach(t => {
                t.classList.toggle('active', t.dataset.flavor === key);
                if (t.dataset.flavor === key) t.click();
            });
        });

        // Smooth scroll for nav links
        document.querySelectorAll('nav a[href^="#"]').forEach(a => {
            a.addEventListener('click', (e) => {
                e.preventDefault();
                const target = document.querySelector(a.getAttribute('href'));
                if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        });

        // Animate elements on scroll
        const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' };
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.flavor-detail, .demo-player, .section-title, .section-label, .compat-card, .compat-badges, .compat-note, .pricing-card, .pricing-guarantee, .testimonial-card').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(30px)';
            el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(el);
        });
    </script>

    <!-- Silk WebGL Background (ported from ReactBits) -->
    <script>
    (function() {
        const canvas = document.getElementById('silk-bg');
        const gl = canvas.getContext('webgl');
        if (!gl) return;

        function resize() {
            const dpr = Math.min(window.devicePixelRatio || 1, 2);
            canvas.width = window.innerWidth * dpr;
            canvas.height = window.innerHeight * dpr;
            gl.viewport(0, 0, canvas.width, canvas.height);
        }
        resize();
        window.addEventListener('resize', resize);

        const vsSource = `
            attribute vec2 aPosition;
            varying vec2 vUv;
            void main() {
                vUv = aPosition * 0.5 + 0.5;
                gl_Position = vec4(aPosition, 0.0, 1.0);
            }
        `;

        const fsSource = `
            precision mediump float;
            varying vec2 vUv;
            uniform float uTime;
            uniform vec3 uColor;
            uniform float uSpeed;
            uniform float uScale;
            uniform float uRotation;
            uniform float uNoiseIntensity;

            const float e = 2.71828182845904523536;

            float noise(vec2 texCoord) {
                float G = e;
                vec2 r = (G * sin(G * texCoord));
                return fract(r.x * r.y * (1.0 + texCoord.x));
            }

            vec2 rotateUvs(vec2 uv, float angle) {
                float c = cos(angle);
                float s = sin(angle);
                mat2 rot = mat2(c, -s, s, c);
                return rot * uv;
            }

            void main() {
                float rnd = noise(gl_FragCoord.xy);
                vec2 uv = rotateUvs(vUv * uScale, uRotation);
                vec2 tex = uv * uScale;
                float tOffset = uSpeed * uTime;

                tex.y += 0.03 * sin(8.0 * tex.x - tOffset);

                float pattern = 0.6 +
                    0.4 * sin(5.0 * (tex.x + tex.y +
                    cos(3.0 * tex.x + 5.0 * tex.y) +
                    0.02 * tOffset) +
                    sin(20.0 * (tex.x + tex.y - 0.1 * tOffset)));

                vec4 col = vec4(uColor, 1.0) * vec4(vec3(pattern), 1.0) - rnd / 15.0 * uNoiseIntensity;
                col.a = 1.0;
                gl_FragColor = col;
            }
        `;

        function compile(type, src) {
            const s = gl.createShader(type);
            gl.shaderSource(s, src);
            gl.compileShader(s);
            return s;
        }

        const prog = gl.createProgram();
        gl.attachShader(prog, compile(gl.VERTEX_SHADER, vsSource));
        gl.attachShader(prog, compile(gl.FRAGMENT_SHADER, fsSource));
        gl.linkProgram(prog);
        gl.useProgram(prog);

        const buf = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, buf);
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1,-1, 1,-1, -1,1, 1,1]), gl.STATIC_DRAW);
        const aPos = gl.getAttribLocation(prog, 'aPosition');
        gl.enableVertexAttribArray(aPos);
        gl.vertexAttribPointer(aPos, 2, gl.FLOAT, false, 0, 0);

        const uTime = gl.getUniformLocation(prog, 'uTime');
        const uColor = gl.getUniformLocation(prog, 'uColor');
        const uSpeed = gl.getUniformLocation(prog, 'uSpeed');
        const uScale = gl.getUniformLocation(prog, 'uScale');
        const uRotation = gl.getUniformLocation(prog, 'uRotation');
        const uNoise = gl.getUniformLocation(prog, 'uNoiseIntensity');

        // Deep purple silk to match site theme
        gl.uniform3f(uColor, 0.16, 0.06, 0.35);
        gl.uniform1f(uSpeed, 5.0);
        gl.uniform1f(uScale, 1.0);
        gl.uniform1f(uRotation, 0.0);
        gl.uniform1f(uNoise, 1.5);

        let time = 0;
        function frame(ts) {
            time += 0.0016;
            gl.uniform1f(uTime, time);
            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
            requestAnimationFrame(frame);
        }
        requestAnimationFrame(frame);
    })();
    </script>

    <!-- Shuffle Text Animation -->
    <script>
    (function() {
        var el = document.getElementById('shuffleText');
        if (!el) return;
        var originalText = el.getAttribute('data-text');
        var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
        var iterations = 0;
        var interval = null;

        function shuffle() {
            if (interval) clearInterval(interval);
            iterations = 0;
            interval = setInterval(function() {
                el.textContent = originalText.split('').map(function(ch, i) {
                    if (ch === ' ') return ' ';
                    if (i < iterations) return originalText[i];
                    return chars[Math.floor(Math.random() * chars.length)];
                }).join('');
                iterations += 1 / 2;
                if (iterations >= originalText.length) {
                    clearInterval(interval);
                    el.textContent = originalText;
                }
            }, 30);
        }

        // Play on page load
        shuffle();

        // Replay on hover
        el.addEventListener('mouseenter', shuffle);

        // Replay on touch
        el.addEventListener('touchstart', shuffle);
    })();
    </script>

    <!-- Demo Download Gate Modal -->
    <style>
        .demo-gate-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }
        .demo-gate-overlay.active { display: flex; }

        .demo-gate {
            background: linear-gradient(180deg, var(--bg-card) 0%, var(--bg-card-darker) 100%);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 40px;
            max-width: 420px;
            width: 90%;
            text-align: center;
            position: relative;
            animation: gateSlideIn 0.3s ease-out;
        }
        @keyframes gateSlideIn {
            from { opacity: 0; transform: translateY(20px) scale(0.97); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .demo-gate-close {
            position: absolute;
            top: 14px;
            right: 18px;
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 22px;
            cursor: pointer;
            line-height: 1;
        }
        .demo-gate-close:hover { color: var(--text-primary); }

        .demo-gate h3 {
            font-size: 22px;
            font-weight: 700;
            margin: 0 0 6px;
            color: var(--text-primary);
        }
        .demo-gate p {
            font-size: 14px;
            color: var(--text-secondary);
            margin: 0 0 24px;
        }

        .demo-gate-input {
            width: 100%;
            padding: 14px 16px;
            border-radius: 10px;
            border: 1px solid var(--border);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 15px;
            font-family: inherit;
            outline: none;
            transition: border-color 0.2s;
            box-sizing: border-box;
        }
        .demo-gate-input::placeholder { color: var(--text-muted); }
        .demo-gate-input:focus { border-color: var(--orange); }

        .demo-gate-submit {
            width: 100%;
            margin-top: 14px;
            padding: 14px;
            border-radius: 10px;
            border: none;
            background: linear-gradient(135deg, var(--orange), var(--red));
            color: #fff;
            font-size: 16px;
            font-weight: 600;
            font-family: inherit;
            cursor: pointer;
            transition: opacity 0.2s, transform 0.1s;
        }
        .demo-gate-submit:hover { opacity: 0.9; }
        .demo-gate-submit:active { transform: scale(0.98); }

        .demo-gate-error {
            color: var(--red);
            font-size: 13px;
            margin-top: 8px;
            min-height: 18px;
        }

        .demo-gate-fine {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 16px;
        }
    </style>

    <div class="demo-gate-overlay" id="demoGateOverlay">
        <div class="demo-gate">
            <button class="demo-gate-close" onclick="closeDemoGate()">&times;</button>
            <h3>Get the Free Demo</h3>
            <p>Enter your email or phone number to unlock the download.</p>
            <form id="demoGateForm" onsubmit="return submitDemoGate(event)">
                <input type="text" class="demo-gate-input" id="demoGateContact"
                       placeholder="Email or phone number" autocomplete="email" required>
                <div class="demo-gate-error" id="demoGateError"></div>
                <button type="submit" class="demo-gate-submit">Download Now</button>
            </form>
            <div class="demo-gate-fine">No spam. We'll only notify you about Carbonator updates.</div>
        </div>
    </div>

    <script>
    function openDemoGate(e) {
        e.preventDefault();
        document.getElementById('demoGateOverlay').classList.add('active');
        setTimeout(() => document.getElementById('demoGateContact').focus(), 100);
    }

    function closeDemoGate() {
        document.getElementById('demoGateOverlay').classList.remove('active');
        document.getElementById('demoGateError').textContent = '';
    }

    // Close on overlay click (outside modal)
    document.getElementById('demoGateOverlay').addEventListener('click', function(e) {
        if (e.target === this) closeDemoGate();
    });

    function submitDemoGate(e) {
        e.preventDefault();
        const contact = document.getElementById('demoGateContact').value.trim();
        const errorEl = document.getElementById('demoGateError');

        // Basic validation: email or phone
        const emailRe = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const phoneRe = /^[\d\s\-\+\(\)]{7,}$/;

        if (!emailRe.test(contact) && !phoneRe.test(contact)) {
            errorEl.textContent = 'Please enter a valid email or phone number.';
            return false;
        }

        errorEl.textContent = '';

        // Disable button while submitting
        const btn = document.querySelector('.demo-gate-submit');
        btn.textContent = 'Sending...';
        btn.disabled = true;

        // Send lead to Google Sheets via hidden iframe form (bypasses CORS entirely)
        var iframe = document.createElement('iframe');
        iframe.name = 'leadFrame';
        iframe.style.display = 'none';
        document.body.appendChild(iframe);

        var form = document.createElement('form');
        form.method = 'POST';
        form.action = 'https://script.google.com/macros/s/AKfycbzsIhbwCs4N1fRLyQ3P4BTdXMtSw4HdZK3q2G7XGBtk5w48XQjf8iPC56ERqo_Bapfa/exec';
        form.target = 'leadFrame';

        var input = document.createElement('input');
        input.type = 'hidden';
        input.name = 'contact';
        input.value = contact;
        form.appendChild(input);

        document.body.appendChild(form);
        form.submit();
        document.body.removeChild(form);

        // Clean up iframe after submission
        setTimeout(function() {
            document.body.removeChild(iframe);
        }, 5000);

        // Close modal and trigger download
        closeDemoGate();
        btn.textContent = 'Download Now';
        btn.disabled = false;

        var a = document.createElement('a');
        a.href = 'Carbonator DEMO.zip';
        a.download = '';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);

        return false;
    }
    </script>

    <!-- Launch Countdown Timer -->
    <script>
    (function() {
        // Set launch end date: March 31, 2026 (matches Stripe coupon expiry)
        var launchEnd = new Date('2026-03-31T23:59:59-05:00').getTime();
        var banner = document.getElementById('launchBanner');
        var daysEl = document.getElementById('cd-days');
        var hoursEl = document.getElementById('cd-hours');
        var minsEl = document.getElementById('cd-mins');
        var secsEl = document.getElementById('cd-secs');

        function pad(n) { return n < 10 ? '0' + n : n; }

        function update() {
            var now = Date.now();
            var diff = launchEnd - now;

            if (diff <= 0) {
                banner.classList.add('expired');
                daysEl.textContent = '00';
                hoursEl.textContent = '00';
                minsEl.textContent = '00';
                secsEl.textContent = '00';
                return;
            }

            var days = Math.floor(diff / (1000 * 60 * 60 * 24));
            var hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            var secs = Math.floor((diff % (1000 * 60)) / 1000);

            daysEl.textContent = pad(days);
            hoursEl.textContent = pad(hours);
            minsEl.textContent = pad(mins);
            secsEl.textContent = pad(secs);
        }

        update();
        setInterval(update, 1000);
    })();
    </script>

</body>
</html>
